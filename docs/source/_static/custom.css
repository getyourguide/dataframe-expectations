/* Custom styling for expectations documentation with PyData Sphinx theme */

/* Fix PyData theme page width constraint that causes header overlapping */
.bd-page-width {
    max-width: none !important;
    width: 100% !important;
}

.bd-header__inner.bd-page-width {
    max-width: none !important;
    width: calc(100% - 2rem) !important;
    margin: 0 1rem !important;
}

/* Improve header layout to prevent overlapping */
.bd-header .bd-header__inner {
    justify-content: space-between !important;
    align-items: center !important;
    flex-wrap: nowrap !important;
}

.col-lg-3.navbar-header-items__start {
    flex: 0 0 auto !important;
    max-width: 40% !important;
    overflow: hidden !important;
}

.col-lg-9.navbar-header-items {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
}

.navbar-brand.logo .title.logo__title {
    font-size: 1rem !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 100% !important;
}

.navbar-header-items__center {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    overflow: hidden !important;
}

.navbar-header-items__end {
    flex: 0 0 auto !important;
}

/* Fix sidebar layout - left navigation with section nav underneath */
.bd-sidebar-primary {
    display: block !important;
    width: 280px !important;
    position: sticky !important;
    top: var(--pst-header-height) !important;
    height: calc(100vh - var(--pst-header-height)) !important;
    overflow-y: auto !important;
}

.bd-sidebar-secondary {
    display: none !important;
}

/* Ensure main content adjusts for left sidebar only */
.bd-main {
    display: flex !important;
}

.bd-content {
    flex: 1 !important;
    min-width: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
}

/* Make sure the article container is properly sized */
.bd-article-container {
    width: 100% !important;
    max-width: none !important;
    padding: 0 3rem !important;
    min-width: 0 !important;
}

/* Style the "On this page" section in the left sidebar */
.bd-sidebar-primary .bd-toc {
    margin-top: 2rem !important;
    padding-top: 1rem !important;
    border-top: 1px solid var(--pst-color-border) !important;
}

.bd-sidebar-primary .bd-toc .toc-title {
    font-weight: bold !important;
    margin-bottom: 0.75rem !important;
    color: var(--pst-color-text-base) !important;
    font-size: 0.9rem !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
}

.bd-sidebar-primary .bd-toc ul {
    list-style: none !important;
    padding-left: 0 !important;
    margin: 0 !important;
}

.bd-sidebar-primary .bd-toc ul ul {
    padding-left: 1rem !important;
    margin-top: 0.25rem !important;
}

.bd-sidebar-primary .bd-toc li {
    margin-bottom: 0.25rem !important;
}

.bd-sidebar-primary .bd-toc a {
    color: var(--pst-color-text-muted) !important;
    text-decoration: none !important;
    display: block !important;
    padding: 0.25rem 0.5rem !important;
    font-size: 0.85rem !important;
    border-radius: 3px !important;
    line-height: 1.4 !important;
}

.bd-sidebar-primary .bd-toc a:hover {
    color: var(--pst-color-primary) !important;
    background-color: var(--pst-color-primary-bg) !important;
}

.bd-sidebar-primary .bd-toc a.current {
    color: var(--pst-color-primary) !important;
    background-color: var(--pst-color-primary-bg) !important;
    font-weight: 500 !important;
}

/* Mobile responsive fixes */
@media (max-width: 991px) {
    .col-lg-3.navbar-header-items__start {
        max-width: 50% !important;
    }

    .navbar-brand.logo .title.logo__title {
        font-size: 0.9rem !important;
    }
}

@media (max-width: 768px) {
    .bd-header .bd-header__inner {
        flex-wrap: wrap !important;
        gap: 0.5rem !important;
    }

    .col-lg-3.navbar-header-items__start,
    .col-lg-9.navbar-header-items {
        flex: 1 1 100% !important;
        max-width: 100% !important;
    }

    .navbar-brand.logo .title.logo__title {
        font-size: 1rem !important;
        white-space: normal !important;
        line-height: 1.2 !important;
    }

    .bd-sidebar-primary {
        width: 100% !important;
        position: relative !important;
        height: auto !important;
    }

    .bd-main {
        flex-direction: column !important;
    }
}

/* Full-width layout for PyData theme */
.bd-main .bd-content .bd-article-container {
    max-width: none !important;
}

.bd-container-fluid {
    max-width: none !important;
}

.bd-content {
    padding-left: 3rem !important;
    padding-right: 3rem !important;
}

/* Style all tables in the expectations documentation */
table.docutils {
    width: 100% !important;
    table-layout: fixed !important;
    border-collapse: collapse !important;
    margin: 1em 0 !important;
}

table.docutils th,
table.docutils td {
    border: 1px solid #ddd !important;
    padding: 8px !important;
    text-align: left !important;
    vertical-align: top !important;
    word-wrap: break-word !important; /* Allow long words to break */
    overflow-wrap: break-word !important; /* Modern browsers */
    white-space: normal !important; /* Allow text wrapping */
}

/* Set specific column widths for the expectations summary table */
table.docutils th:nth-child(1),
table.docutils td:nth-child(1) {
    width: 25% !important; /* Category column */
}

table.docutils th:nth-child(2),
table.docutils td:nth-child(2) {
    width: 20% !important; /* Subcategory column */
}

table.docutils th:nth-child(3),
table.docutils td:nth-child(3) {
    width: 55% !important; /* Expectations column */
}

table.docutils th {
    background-color: #f5f5f5 !important;
    font-weight: bold !important;
}

table.docutils tr:nth-child(even) {
    background-color: #f9f9f9 !important;
}

/* Make expectation names in summary table clickable and styled */
table.docutils td a,
table.docutils td a.expectation-link {
    word-break: break-word !important;
    display: inline !important;
    color: #007bff !important;
    text-decoration: none !important;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace !important;
    font-size: 0.9em !important;
    padding: 2px 4px !important;
    background-color: #f8f9fa !important;
    border-radius: 3px !important;
    border: 1px solid #e9ecef !important;
}

table.docutils td a:hover,
table.docutils td a.expectation-link:hover {
    background-color: #e3f2fd !important;
    border-color: #2196f3 !important;
    text-decoration: none !important;
}

/* For very small screens, allow some responsiveness */
@media (max-width: 768px) {
    table.docutils {
        font-size: 0.9em !important;
    }

    table.docutils th,
    table.docutils td {
        padding: 6px !important;
    }
}

/* Style method signatures */
.method-signature {
    background-color: #f8f8f8;
    border: 1px solid #e1e1e1;
    border-radius: 3px;
    padding: 10px;
    font-family: 'Courier New', Courier, monospace;
    margin: 10px 0;
}

/* Style expectation method headers */
.expectation-method h5 {
    color: #2e8b57;
    border-bottom: 2px solid #2e8b57;
    padding-bottom: 5px;
}

/* Style parameter lists */
.parameter-list {
    margin-left: 20px;
}

.parameter-list li {
    margin-bottom: 5px;
}

/* Add some spacing to sections */
.section {
    margin-bottom: 2em;
}

/* Style code blocks */
pre {
    background-color: #f8f8f8;
    border: 1px solid #e1e1e1;
    border-radius: 4px;
    padding: 10px;
    overflow-x: auto;
}

/* Style inline code */
code {
    background-color: #f1f1f1;
    padding: 2px 4px;
    border-radius: 3px;
    font-family: 'Courier New', Courier, monospace;
}

/* Style custom method documentation to match autodoc exactly */
dl.py.method {
    margin-bottom: 2em;
}

dt.sig.sig-object.py {
    background-color: #f8f8f8;
    border: 1px solid #d1d1d1;
    border-radius: 3px;
    padding: 10px;
    font-family: 'SFMono-Regular', Menlo, 'Liberation Mono', Courier, monospace;
    font-size: 0.9em;
    margin-bottom: 0.5em;
    font-weight: normal;
}

dt.sig.sig-object.py .sig-name {
    font-weight: bold;
}

dt.sig.sig-object.py .sig-paren {
    color: #666;
}

dd.field-list {
    margin-left: 2em;
}

dd.field-list dt {
    font-weight: bold;
    margin-bottom: 0.5em;
}

dd.field-list dd {
    margin-left: 1em;
    margin-bottom: 0.5em;
}

/* Style the description content */
dd.desc-content {
    margin-left: 2em;
}

dd.desc-content p {
    margin-bottom: 1em;
}

/* Style parameter lists */
dl.field-list dt {
    font-weight: bold;
    color: #2980b9;
}

dl.field-list dd p strong {
    color: #333;
}

/* Ensure our custom expectations use standard Sphinx autodoc styling */
dl.py.method > dt {
    background-color: #f8f8f8 !important;
    border: 1px solid #d1d1d1 !important;
    border-radius: 3px !important;
    padding: 10px !important;
    font-family: 'SFMono-Regular', Menlo, 'Liberation Mono', Courier, monospace !important;
    font-size: 0.9em !important;
    margin-bottom: 0.5em !important;
    font-weight: normal !important;
}

dl.py.method > dd {
    margin-left: 2em !important;
}

/* Override any custom formatting that interferes with autodoc */
.expectation-method h5,
.method-signature,
.parameter-list {
    display: none !important; /* Hide any custom formatting */
}

/* Make sure field lists look standard */
dl.py.method dd dl.field-list {
    margin-top: 1em !important;
}

dl.py.method dd dl.field-list dt {
    font-weight: bold !important;
    color: #2980b9 !important;
    margin-bottom: 0.5em !important;
}

dl.py.method dd dl.field-list dd {
    margin-left: 1em !important;
    margin-bottom: 1em !important;
}

/* Great Expectations Gallery Style Cards */
.expectations-gallery {
    margin: 2rem 0 !important;
    padding: 0 !important;
    width: 100% !important;
}

/* Style category title headings for TOC inclusion */
.category-title,
h1.category-title,
h2.category-title {
    color: #2c3e50 !important;
    border-bottom: 3px solid #3498db !important;
    padding-bottom: 10px !important;
    margin: 2em 0 1em 0 !important;
    font-size: 1.4em !important;
    font-weight: bold !important;
}

.subcategory-title {
    color: #34495e !important;
    margin: 1.5em 0 1em 0 !important;
    font-size: 1.2em !important;
    font-weight: bold !important;
}

.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 32px !important;
    margin: 2rem 0 !important;
    align-items: start;
    padding: 1rem 0 !important;
    width: 100% !important;
    max-width: none !important;
}

.expectation-card {
    border: 1px solid #e1e8ed !important;
    border-radius: 8px !important;
    background: white !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    transition: all 0.3s ease !important;
    overflow: hidden !important;
    min-height: 320px !important;
    display: flex !important;
    flex-direction: column !important;
    margin: 0 !important;
    width: 100% !important;
    min-width: 400px !important;
}

/* Ensure expectation cards have proper internal padding */
.expectation-card .card-header,
.expectation-card .card-body,
.expectation-card .card-footer {
    box-sizing: border-box !important;
}

.expectation-card .card-header {
    padding: 20px 24px !important;
}

.expectation-card .card-body {
    padding: 24px !important;
}

.expectation-card .card-footer {
    padding: 20px 24px !important;
}

.expectation-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
}

.card-header {
    background: #f8f9fa !important;
    padding: 20px 24px !important;
    border-bottom: 1px solid #e1e8ed !important;
    min-height: 60px !important;
    display: flex !important;
    align-items: center !important;
}

.method-name {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 1.1em;
    font-weight: bold;
    color: #2c3e50;
    margin: 0;
    word-wrap: break-word;
    word-break: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    line-height: 1.3;
}

.card-body {
    padding: 24px !important;
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
}

.card-description {
    color: #555;
    margin-bottom: 15px;
    line-height: 1.5;
}

.tags-container {
    margin: 15px 0;
}

.tag {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    margin-right: 8px;
    margin-bottom: 5px;
}

.category-tag {
    background: #e3f2fd;
    color: #1976d2;
    border: 1px solid #bbdefb;
}

.subcategory-tag {
    background: #f3e5f5;
    color: #7b1fa2;
    border: 1px solid #ce93d8;
}

.params-preview {
    margin-top: 15px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 4px;
}

.params-title {
    font-weight: bold;
    color: #495057;
    margin: 0 0 5px 0;
    font-size: 0.9em;
}

.params-list {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.85em;
    color: #6c757d;
    margin: 0;
}

.card-footer {
    padding: 20px 24px !important;
    background: #f8f9fa !important;
    border-top: 1px solid #e1e8ed !important;
    text-align: right !important;
    margin-top: auto !important;
}

.btn {
    display: inline-block;
    padding: 8px 16px;
    border-radius: 4px;
    text-decoration: none;
    font-size: 0.9em;
    font-weight: 500;
    transition: all 0.2s ease;
}

.btn-details {
    background: #007bff;
    color: white !important;
    border: 1px solid #007bff;
    text-decoration: none !important;
}

.btn-details:hover {
    background: #0056b3;
    border-color: #0056b3;
    text-decoration: none !important;
    color: white !important;
}

/* Responsive design */
@media (max-width: 1400px) {
    .cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)) !important;
        gap: 28px !important;
    }
}

@media (max-width: 1200px) {
    .cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)) !important;
        gap: 24px !important;
    }

    .expectation-card {
        min-width: 350px !important;
    }
}

@media (max-width: 768px) {
    .cards-grid {
        grid-template-columns: 1fr !important;
        gap: 24px !important;
        margin: 1.5rem 0 !important;
        padding: 0 !important;
    }

    .expectation-card {
        margin: 0 !important;
        min-height: 280px !important;
        min-width: auto !important;
    }

    .bd-content {
        padding-left: 1.5rem !important;
        padding-right: 1.5rem !important;
    }

    .bd-article-container {
        padding: 0 1.5rem !important;
    }
}
